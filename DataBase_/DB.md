# DataBase

<br>

<hr/>

- [인덱스(index)란?](#인덱스index란)
- [DB 정규화](#db-정규화)
- [트랜잭션(Transaction)](#트랜잭션transaction)

<hr/>

<br>

## 인덱스(index)란?

인덱스란 추가적인 쓰기 작업과 저장 공간을 활용하여 데이터베이스 테이블의 검색 속도를 향상시키기 위한 자료구조이다. <br>
데이터베이스의 index는 책의 색인과 같다. 

데이터베이스에서도 테이블의 모든 데이터를 검색하면 시간이 오래 걸리기 때문에 데이터와 데이터의 위치를 포함한 자료구조를 생성하여 빠르게 조회할 수 있도록 돕고 있다. <br>

만약 Index를 적용하지 않은 컬럼을 조회한다면, 전체를 탐색하는 Full Scan이 수행된다. Full Scan은 전체를 비교하여 탐색하기 때문에 처리 속도가 떨어진다. <br>

### 인덱스의 자료구조

- 해시 테이블
    - 컬럼의 값으로 생성된 해시를 기반으로 인덱스를 구현한다.
    - 시간복잡도가 O(1)이기 때문에 검색이 매우 빠르다.
    - 부등호(<, >)와 같은 연속적인 데이터를 위한 순차 검색이 불가능하다.

<br>

- B+Tree
    - 자식 노드가 2개 이상인 B-Tree를 개선시킨 자료구조이다.
    - BTree의 리프노드들을 LinkedList로 연결하여 순차 검색을 용이하게 하였다.
    - 해시 테이블보다 나쁜 O(𝑙𝑜𝑔2𝑛)의 시간복잡도를 가지지만, 해시테이블보다 흔하게 사용된다.

<br>

## DB 정규화

1. 제1정규형 <br>
모든 속성 값이 원자 값을 갖도록 분해한다. <br>

2. 제2정규형 <br>
제1정규형을 만족하고, 기본키가 아닌 속성이 기본키에 완전 함수 종속이도록 분해한다. <br>
(여기서 완전 함수 종속이란 기본키의 부분집합이 다른 값을 결정하지 않는 것을 의미한다.) <br>

3. 제3정규형 <br>
제2정규형을 만족하고, 기본키가 아닌 속성이 기본키에 직접 종속(비이행적 종속)하도록 분해한다. <br>
(여기서 이행적 종속이란 A->B->C가 성립하는 것으로, 이를 A,B와 B,C로 분해하는 것이 제3정규형이다.) <br>

4. BCNF 정규형 <br>
제3정규형을 만족하고, 함수 종속성 X->Y가 성립할 때 모든 결정자 X가 후보키가 되도록 분해한다. <br>

<br>

## 트랜잭션(Transaction)

하나 이상의 쿼리를 처리할 때 동일한 Connection 객체를 공유하여 에러가 발생한 경우 모든 과정을 되돌리기 위한 방법이다. <br>

<br>

### 트랜잭션의 ACID

- 원자성(Atomicity) <br>
트랜잭션에 포함된 작업은 전부 수행되거나 전부 수행되지 않아야 한다. <br>

- 일관성(Consistency) <br>
트랜잭션을 수행하기 전이나 후나 데이터베이스는 항상 일관된 상태를 유지해야 한다. <br>

- 고립성(Isolation) <br>
수행 중인 트랜잭션에 다른 트랜잭션이 끼어들어 변경중인 데이터 값을 훼손하지 않아야한다. <br>

- 지속성(Durability) <br>
수행을 성공적으로 완료한 트랜잭션은 변경한 데이터를 영구히 저장해야 한다.

<br>

## 이상 현상의 종류

- 삭제 이상 : 튜플 삭제 시 같이 저장된 다른 정보까지 연쇄적으로 삭제되는 현상 <br>

- 삽입 이상 : 튜플 삽입 시 특정 속성에 해당하는 값이 없어 NULL을 입력해야 하는 현상 <br>

- 수정 이상 : 튜플 수정 시 중복된 데이터의 일부만 수정되어 일어나는 데이터 불일치 현상 <br>

<br>