# Ajax

Asynchronous JavaScript and XML



## Ajax, Ajax의 구성요소

### Ajax의 이해





### Ajax의 주요 구성 요소

- XMLHttpRequest : 웹 서버와 통신 담당

- 사용자의 요청을 웹 서버에 전송하고 웹 서버로부터 받은 결과를 웹 브라우저에 전달

- XMLHttpRequest외에도 ES6에 추가된 Promise 객체와 ES8에 추가된 Async, Await 등을 이용해 Ajax 통신을 할 수 있다.

- DOM : 문서의 구조를 나타낸다. 폼 등의 정보나 화면 구성을 조작할 때 사용

  (\- Promise 자체가 통신을 하는 것은 아님)

- CSS : 글자색





### Ajax 방식

- 웹 브라우저가 아닌 XMLHttpRequest객체가 웹 서버와 통신
- 페이지 이동 없이 특정 HTML control이 웹 서버와 통신하여 결과 화면에 출력
- 웹 서버의 응답 결과는 HTML이 아니라 XML 또는 단순 text.

(그림)



### XMLHttpRequest 객체

- 대부분의 브라우저가 지원 -> XMLHttpRequest를 실행하는 데 문제 없음
- XMLHttpRequest 객체는 reload없이 서버에서 보내는 데이터를 웹 페이지의 한 부분으로 수정

#### XMLHttpRequest객체의  함수

- open() : 요청의 초기화, GET / POST 선택, 접속할 URL 입력
- send() : 웹 서버에 요청 전송

#### XMLHttpRequest 객체의 속성

- onreadystatechange : 응답이 도착하면 특정 자바스크립트 함수를 호출 -> 결과의 알맞은 작업 수행

- readyState :  XMLHttpRequest 객체의 요청에 대한 상태를 숫자로 표시

  상태의 변화(로딩중, 처리중, 처리완료)가 있을 때마다 XMLHttpRequest 객체의 onreadystatechange 속성에 설정된 callback함수가 호출됨

- status : XMLHttpRequest 객체는 웹 서버가 전달한  http 상태코드를 status 속성에 저장.

- responseText/responseXml : 응답의 결과값(텍스트/ XML DOM)을 참조하기 위해서 사용. 

> jquery / 순수 바닐라 자바스크립트( = 순수 자바스크립트)
>
> 요즘은 자바스크립트 그냥 쓰는 추세

### XMLHttpRequest의 객체 생성



## XMLHttpRequest 객체

### 서버에 요청을 보내는 method



#### (1) open()에 GET/POST 사용



#### (2) open()에 동기/비동기 사용



### onreadystatechange Event



#### (1) onreadystatechange

- 이 속성에 연결된 함수는 readyState의 값이 변경될 때마다 자동 호출
- 이 속성값을 통해 웹 서버와의 통신 상태 확인 가능

#### (2) readyState

- 5가지 요청에 대한 상태를 전달 받는다. (0~4)

- 0 (UNINITIALIZED) : 통신 객체 생성,  초기화 되지 않은 상태 

- 1(LOADING) : 연결이 시작되었다는 의미. 

  open() 호출되고 send() 호출되지 않은 상태 

- 2 (LOADED) : 요청의 시작  

  send()메소드가 불렸지만 status와 헤더는 도착하지 않은 상태

- 3 (INTERACTIVE) : 서버가 요청처리를 거의 끝난 상태, 데이터의 일부를 받은 상태

- 4 (COMPLETED) : 서버의 응답을 받아 사용할 준비완료, 데이터를 전부받은 상태





#### (3) status

- 서버로부터 도착한 응답의 상태값.
- 200(OK): 요청 정상 처리
- 403
- 404
- 500



### 서버에서 응답을 받는다.









## Ajax 통신 예제

### Html 파일 비동기 요청

















































