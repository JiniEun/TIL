# JSON

## JSON(JavaScript Object Notation)

- ìë°” ìŠ¤í¬ë¦½íŠ¸ ê°ì²´ í‘œê¸°ë²•
- JSONì€ ë°ì´í„° ì €ì¥ê³¼ êµí™˜ì—ì„œ ì‚¬ìš©í•œë‹¤.
- XMLì— ë¹„í•´ì„œ ë§¤ìš° ì ì€ ë„¤íŠ¸ì›Œí¬ íŠ¸ë˜í”½ì„ ë™ë°˜í•˜ë©°, XMLì„ ëŒ€ì²´í•  ìˆ˜ ìˆëŠ” ë°ì´í„° í‘œí˜„ ê¸°ìˆ 
- ì„œë²„ì™€ ë°ì´í„°ë¥¼ ì£¼ê³  ë°›ì„ ë•Œ, ë°ì´í„°ë¥¼ ì§ë ¬í™”í•  ë•Œ ì‚¬ìš©
- key-value í‘œí˜„
- ê°€ë²¼ìš´ í…ìŠ¤íŠ¸ ê¸°ë°˜ êµ¬ì¡°
- í”„ë¡œê·¸ë¨ ì–¸ì–´ì™€ í”Œë«í¼ì— ë…ë¦½ì .

\- JSON ì°¸ì¡° ì‚¬ì´íŠ¸

 MDN -> [https://developer.mozilla.org/en-US/d...](https://developer.mozilla.org/en-US/docs/Learn/JavaScript/Objects/JSON)

 JavaScript.info -> https://javascript.info/json

 JavaScript.info í•œêµ­ì–´ -> https://ko.javascript.info/json 

\- ìœ ìš©í•œ ì‚¬ì´íŠ¸:

 JSON Diff checker: http://www.jsondiff.com/ 

 : ì„œë²„ì—ì„œ ë°›ì•„ì˜¨ 1ë²ˆì§¸ ë°ì´í„°ì™€ ë‘ë²ˆì§¸ ë°ì´í„°ë¥¼ ë¹„êµí• ë•Œ, ë””ë²„ê¹…ì‹œ ìœ ìš©

 JSON Beautifier/editor: https://jsonbeautifier.org/

 : ì„œë²„ì—ì„œ ë°›ì•„ì˜¨ jsonì´ í¬ë§·ì´ ì˜ëª»ë˜ì—ˆì„ ë•Œ ì•Œë§ì€ í¬ë§·ì„ ë§Œë“¤ì–´ ì¤€ë‹¤..

 JSON Parser: https://jsonparser.org/

 : json -> object í™•ì¸

 JSON Validator: [https://tools.learningcontainer.com/j](https://tools.learningcontainer.com/json-validator/)

 : JSONì˜ ì˜ëª»ëœ í˜•ì‹ì„ ì‚´í´ë³¼ë•Œ ìœ ìš©í•˜ë‹¤



### JSONê³¼ XML í‘œí˜„

-- json example

```json
{"employees":[
    {"firstName":"John", "lastName":"Doe"},
    {"firstName":"Anna", "lastName":"Smith"},
    {"firstName":"Peter", "lastName":"Jones"}
]}
```

-- XML example

```xml
<employees>
    <employee>
        <firstName>John</firstName> <lastName>Doe</lastName>
    </employee>
    <employee>
        <firstName>Anna</firstName> <lastName>Smith</lastName>
    </employee>
    <employee>
        <firstName>Peter</firstName> <lastName>Jones</lastName>
    </employee>
</employees>
```



### JSON Objectì™€ Array êµ¬ì¡°

![image-20210928010317253](JSON_0927.assets/image-20210928010317253.png)

#### JSON Objectì™€ Array êµ¬ë¬¸

- JSON dataëŠ” name-value í•œ ìŒìœ¼ë¡œ í‘œí˜„

  `"firstName":"John"`

- JSON dataëŠ” , ë¡œ êµ¬ë¶„í•´ì„œ í‘œí˜„

- JSON Object ëŠ” {,} ë¥¼ ì‚¬ìš©í•œë‹¤.

  `{"firstName":"John", "lastName":"Doe"}`

- JSON ArrayëŠ” [, ]ë¥¼ ì‚¬ìš©í•œë‹¤.

```json
  "employees":[
       {"firstName":"John", "lastName":"Doe"}, 
       {"firstName":"Anna", "lastName":"Smith"}, 
       {"firstName":"Peter","lastName":"Jones"}
  ]
```



### ì§ë ¬í™” ë° ì—­ì§ë ¬í™”

- ì„œë²„ì™€ í´ë¼ì´ì–¸íŠ¸(ë¸Œë¼ìš°ì €)ê°€ ì—°ê²°í•˜ì—¬ ë°ì´í„°ë¥¼ ì£¼ê³ ë°›ì„ë•Œ ì‚¬ìš©í•œë‹¤.
- parse(text:string, reviver?:(this:any, key:string, value:any) => any) : any; json ë¬¸ìì—´ì„ ì–´ë–¤ íƒ€ì…ì˜ ê°ì²´ë¡œ ë³€í™˜í•´ì¤€ë‹¤.
- parseí•¨ìˆ˜ì˜ reviver? ëŠ” callbackí•¨ìˆ˜ë¡œ, ì‚¬ìš©ì€ ì˜µì…˜ìœ¼ë¡œ ì¢€ë” ì„¸ë°€í•œ ê°ì²´ë¡œ ì¡°ì •í•˜ê³  ì‹¶ì„ë•Œ.

- stringify(value:any, replacer?:(this:any, key:string,value:any) => any, space?: .... ) : string; ì–´ë–¤ íƒ€ì…ì´ë“  string íƒ€ì…ìœ¼ë¡œ ë³€í™˜ í•´ì¤€ë‹¤.
- stringifyí•¨ìˆ˜ì˜ replacer? ëŠ” callbackí•¨ìˆ˜ë¡œ ì‚¬ìš©ì€ ì˜µì…˜ìœ¼ë¡œ ì¢€ ë” ì„¸ë°€í•œ ë¬¸ìì—´ë¡œ í†µì œí•˜ê³  ì‹¶ì„ ë•Œ.



#### ì§ë ¬í™” Object -> JSON

- í´ë¼ì´ì–¸íŠ¸ì—ì„œ ì„œë²„ë¡œ ê°ì²´ë¥¼ ì „ì†¡í• ë•ŒëŠ” JSONì˜ ë¬¸ìì—´ë¡œ ë³€í™˜í•´ì„œ ë³´ë‚¸ë‹¤ 
- stringify(obj)
- ê°ì²´ì•ˆì˜ ë©”ì†Œë“œëŠ” JSON ë¬¸ìì—´ë¡œ ë§Œë“¤ì–´ì§€ì§€ ì•ŠëŠ”ë‹¤.

> index.html

```html
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <script src="async/json.js" defer></script>
</head>
<body>
    
</body>
</html>
```

> async/json.js

Object to JSON

```js
// json.js
// JSON(JavaScript Object Notation)
// 1. Object -> JSON
// stringify(obj)
let json = JSON.stringify(true); //true -> ë¬¸ìì—´
console.log(json);

json = JSON.stringify(['apple', 'banana']); //ë°°ì—´ -> ë¬¸ìì—´
console.log(json);

const rabbit = {  //ê°ì²´ -> ë¬¸ìì—´, ë©”ì„œë“œëŠ” JSONìœ¼ë¡œ ë³€í™˜ë˜ì§€ ì•ŠëŠ”ë‹¤.
    name: 'tori',
    color: 'white',
    size: null,
    birthdate: new Date(),
    jump: () => { // JSONì— ì œì™¸ëœë‹¤.
        console.log(`${name} can jump!`);
    },
};

json = JSON.stringify(rabbit);
console.log(`value : ${json}, type : ${typeof json}`);

//JSONìœ¼ë¡œ ë³€í™˜ì‹œ í†µì œ, ë‘ë²ˆì§¸ íŒŒë¼ë©”í„°ì—ì„œ ë°°ì—´ì„ ë„˜ê¸°ë©´ ì²«ë²ˆì§¸ ê°ì²´ì—ì„œ
//ë‘ë²ˆì§¸ ë°°ì—´ì˜ ë‚´ìš©ë§Œ ë³€í™˜
json = JSON.stringify(rabbit, ['name', 'color']);
console.log(json);

//JSONìœ¼ë¡œ ë³€í™˜ì‹œ í†µì œ, ë‘ë²ˆì§¸ íŒŒë¼ë¯¸í„°ì— í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•œë‹¤.
json = JSON.stringify(rabbit, (key, value) => {
    console.log(`key: ${key}, value: ${value}`);
    return key === 'name' ? 'rab' : value;
});

console.log(json);
```



#### ì—­ì§ë ¬í™” JSON -> Object

- í´ë¼ì´ì–¸íŠ¸ê°€ ì„œë²„ë¡œë¶€í„° JSONì˜ ë¬¸ìì—´ ë°ì´í„°ë¥¼ ë°›ì•„ì„œ ê°ì²´ë¡œ ë³€í™˜í•´ì„œ ì‚¬ìš©í•œë‹¤.

> async/json.js

JSON to Object 

```js
// 2. JSON to Object 
// parse(json)
console.clear();
json = JSON.stringify(rabbit);
const obj = JSON.parse(json);
console.log(obj);

rabbit.jump();
// obj.jump();

console.log(rabbit.birthdate.getDate());
//JSONìœ¼ë¡œ ë³€í™˜í• ë•Œ ë¬¸ìì—´ë¡œ ë³€í™˜ë˜ì–´ objectë¡œ íŒŒì‹±ë ë•Œë„ stringê°’ì„ ê°€ì§„ë‹¤
//console.log(obj.birthdate.getDate()); 

//íŒŒì‹±ë ë•Œ ì¶”ê°€ì ì¸ íŒŒë¼ë¯¸í„°ë¡œ birthdateë¥¼ Dateê°ì²´ë¡œ ë³€í™˜í•˜ê²Œ í•  ìˆ˜ ìˆë‹¤.
const obj2 = JSON.parse(json, (key, value) => {
    console.log(`key: ${key}, value: ${value}`);
    return key === 'birthdate' ? new Date(value) : value;
});
console.log(obj2.birthdate.getDate());
```



### ë¹„ë™ê¸° í†µì‹  ì˜ˆì œ JSON ì‚¬ìš©



#### parse(), stringify() í™•ì¸, typeof();íƒ€ì…í™•ì¸

> json/json1.html

```html
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <h2>JSON Object Creation in JavaScript</h2>
    <p id='demo'></p>

    <script>
        let text = '{"name":"John","street":"Oslo West","phone":"111 11111"}';
        console.log(typeof (text));
        let obj = JSON.parse(text); //ë¬¸ìì—´ì„ ê°ì²´ë¡œ ë³€í™˜
        console.log(typeof (obj));
        document.getElementById('demo').innerHTML =
            obj.name + '<br>' +
            obj.street + '<br>' +
            obj.phone;

        let text2 = JSON.stringify(obj); //ê°ì²´ë¥¼ ë¬¸ìì—´ë¡œ ë³€í™˜
        console.log(typeof (text2));
    </script>
</body>
</html>
```



#### ë¹„ë™ê¸° í†µì‹ ìœ¼ë¡œ JSON ì‘ë‹µ ë°›ê¸°

> json/member.jsp

```jsp
<%@ page contentType="text/html; charset=UTF-8" %>
{
    "code":"success"
    ,
    "data":{
        "member":
    [
        {
        "name":"í™ê¸¸ë™",
        "id":"coder",
        "sno":"a01"
        }
        ,
        {
        "name": "ì•„ë¡œë¯¸",
        "id": "dev",
        "sno": "a02"
        }
    ]

    }
}
```

> json/ajaxtest3.html

```html
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <script>
        function loadDoc() {
            let xhttp;
            if (window.XMLHttpRequest) {
                xhttp = new XMLHttpRequest();
            } else {
                // code for IE6, IE5
                xhttp = ActiveXObject("Microsoft.XMLHTTP");
            }

            xhttp.onreadystatechange = function () {
                if (xhttp.readyState == 4 && xhttp.status == 200) {
                    //alert(xhttp.responseText);
                    let result = JSON.parse(xhttp.responseText);
                    if (result.code === 'success') {
                        let marr = result.data.member;
                        let tex = '';
                        console.log(marr);
                        document.getElementById('demo').innerHTML = "";
                        for (let i = 0; marr.length; i++) {
                            let idx = marr[i]["id"];
                            let name = marr[i].name;
                            let sno = marr[i].sno;
                            let txt = idx + " [" + name + "] " + sno + ", ";

                            document.getElementById("demo").append(txt);
                        }
                    }

                } else {

                    // alert(xhttp.status)

                }
            };
            xhttp.open("GET", "member.jsp", true);
            xhttp.send();
        }
    </script>
</head>
<body>
    <p id='demo'>Let AJAX change this text.</p>
    <button onclick='loadDoc()'>Change Content</button>
</body>
</html>
```



#### - Tomcat ì„œë²„ ì„¤ì •

```markdown
**Tomcat**

- ì„œë²„ë¥¼ êµ¬í˜„í•œ jspëŠ” í†°ìº£ì´ ìˆì–´ì•¼í•œë‹¤.
- í†°ìº£ ì„œë²„ ì„¤ì • 
- VSCode í™•ì¥í•˜ê¸°
   Debugger for java (Microsoft)
   Tomcat for java (Wei Shen)
 
- Explorer í•˜ë‹¨ì— ì¶”ê°€ëœ TOMCAT SERVERSì—ì„œ '+' í´ë¦­ í›„
  í†°ìº£í´ë”ë¥¼ ì¶”ê°€ í•œë‹¤.
- ìš°í´ë¦­ìœ¼ë¡œ Open server configration ì„ íƒí•œë‹¤.
 
<Host name="localhost" ì°¾ì•„ì„œ ì•„ë˜ë¶€ë¶„ì— ë‹¤ìŒì†ŒìŠ¤ ì¶”ê°€ (d:/aistudy/javascirpt/ajax)
<Context path="" docBase="jspì‘ì—…ê²½ë¡œ"></Context>

### ì‹¤í–‰í•˜ê¸°
 -  tomcat-9.0 (ìš°í´ë¦­)-> Open in Browser 
```

<img src="JSON_0927.assets/image-20210928005446554.png" alt="image-20210928005446554" style="zoom:50%;" />

-- ìš”ì²­ í˜ì´ì§€ í™•ì¸

```
http://localhost:8000/json/member.jsp
```

![image-20210928005711373](JSON_0927.assets/image-20210928005711373.png)

-- Ajax ë¹„ë™ê¸° ìš”ì²­

```
http://localhost:8000/json/ajaxtest3.html
```

![image-20210928005737215](JSON_0927.assets/image-20210928005737215.png)

(ë²„íŠ¼ í´ë¦­ í›„)

![image-20210928005749283](JSON_0927.assets/image-20210928005749283.png)



>+) `http://localhost:8000/json/ajaxtest3.html`
>
>ê²½ë¡œì˜ ê²½ìš° 
>
>tomcat -> open server configration ì—ì„œ
>
>server.xml ì—ì„œ ê²½ë¡œ ì–´ë–»ê²Œ ì„¤ì •í–ˆë‚˜ì— ë”°ë¼ ë‹¤ë¦„
>ajax/json
>```xml
> <Context path="" docBase="/Users/jules/Study/AIstudy/web/ajax/json"></Context>
>```
>-- => `http://localhost:8000/ajaxtest3.html`
>
>ajax
>
>```xml
> <Context path="" docBase="/Users/jules/Study/AIstudy/web/ajax"></Context>
>```
>
>-- ì´ëŸ° ê²½ìš° =>  `http://localhost:8000/json/ajaxtest3.html`



*Fin.ğŸ§*

